<!doctype html>
<html lang="az"><meta charset="utf-8" />
<title>Add SHKL to MetaMask</title>
<button id="add">Add SHKL to MetaMask</button>
<script>
  const token = {
    address: "0x4feff57c5a2c256b037021a71b5de55601ffd59c0", // lowercase
    symbol:  "SHKL",
    decimals: 18,
    image:   "https://amaranth-worthwhile-amphibian-987.mypinata.cloud/ipfs/bafybeibkvcrh2kznq6wygidgia7pshtsqazuxme7wbkwzodaqklnanuuie"
  };

  const BASE_SEPOLIA = {
    chainId: "0x14a34", // 84532
    chainName: "Base Sepolia",
    nativeCurrency: { name: "ETH", symbol: "ETH", decimals: 18 },
    rpcUrls: ["https://sepolia.base.org"],
    blockExplorerUrls: ["https://base-sepolia.blockscout.com"]
  };

  async function ensureBaseSepolia() {
    const id = await ethereum.request({ method: "eth_chainId" });
    if (id !== BASE_SEPOLIA.chainId) {
      try { await ethereum.request({ method: "wallet_switchEthereumChain", params: [{ chainId: BASE_SEPOLIA.chainId }] }); }
      catch (e) {
        if (e.code === 4902) { await ethereum.request({ method: "wallet_addEthereumChain", params: [BASE_SEPOLIA] }); }
        else throw e;
      }
    }
  }

  document.getElementById("add").onclick = async () => {
    try {
      if (!window.ethereum) throw new Error("MetaMask tapılmadı");
      await ensureBaseSepolia();
      const ok = await ethereum.request({
        method: "wallet_watchAsset",
        params: { type: "ERC20", options: token }
      });
      alert(ok ? "SHKL əlavə olundu ✅" : "İstifadəçi ləğv etdi.");
    } catch (err) {
      alert("Xəta: " + (err?.message || err));
      console.error(err);
    }
  };
</script>
</html>
